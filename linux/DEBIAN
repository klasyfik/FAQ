################################ add extra firmware

https://git.kernel.org/pub/scm/linux/kernel/git/iwlwifi/linux-firmware.git/about/\
git clone git://git.kernel.org/pub/scm/linux/kernel/git/iwlwifi/linux-firmware.git
apt install make
apt install python
make check
make install
reboot

################################ add radeon 300

Add [non-free]
deb http://deb.debian.org/debian/ buster main contrib non-free
deb-src http://deb.debian.org/debian/ buster main contrib non-free

sudo apt update
sudo apt install firmware-amd-graphics

################################ add windows to grub

if windows boot under UEFI install linux under UEFI too

# run
blkid

find UUI for PARTLABEL="EFI system partition"
UUID="384F-5ECE" BLOCK_SIZE="512" TYPE="vfat" PARTLABEL="EFI system partition" 

# add to /etc/grub.d/ 40_custom
menuentry 'Windows 10' {
    search --fs-uuid --no-floppy --set=root CC66-4B02
    chainloader (${root})/EFI/Microsoft/Boot/bootmgfw.efi
}

# run
update-grub

################################ bluetooth boom

apt install pulseaudio-module-bluetooth

############################### nvidia driver info - glxinfo

apt install mesa-utils
#run on user permittion not root
glxinfo | egrep "OpenGL vendor|OpenGL renderer"

############################## gui xrandr - ARandR
# configure two screen

apt install arandr

##############################  configure OPTIMUS PRIME
https://wiki.debian.org/NVIDIA%20Optimus
https://wiki.archlinux.org/title/NVIDIA_Optimus#Using_PRIME_render_offload

# info opengl
glxinfo | grep NVIDIA
# list of cards
lspci | grep VGA

# X config
/etc/X11/xorg.conf.d/nvidia_primry.cong
Section "OutputClass"
    Identifier "intel"
    Driver "modesetting"
EndSection

Section "OutputClass"
    Identifier "nvidia"
    MatchDriver "nvidia-drm"
    Driver "nvidia"
    Option "AllowEmptyInitialConfiguration"
    Option "PrimaryGPU" "yes"
    ModulePath "/usr/lib/nvidia/xorg"
    ModulePath "/usr/lib/xorg/modules"
EndSection

### sddm display manager
/usr/share/sddm/scripts/Xsetup
xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto
xrandr --dpi 157
#default dpi 96

# xrandr - show displays
# two displays
#xrandr --output DP-0 --off --output DP-1 --off --output HDMI-0 --primary --mode 3840x2160 --pos 0x0 --rotate normal --output eDP-1-1 --mode 1920x1080 --pos >
# two displays
#xrandr --output DP-0 --off --output DP-1 --off --output HDMI-0 --off --output eDP-1-1 --primary --mode 1920x1080 --pos 0x0 --rotate normal


########################### second option xorg PRIME
Section "ServerLayout"
    Identifier "layout"
# Reverse LAPTOP
#     Screen "intel"
#     Inactive "nvidia"
    Screen "nvidia"
    Inactive "intel"
EndSection

Section "Device"
    Identifier "nvidia"
    Driver "nvidia"
    BusID "PCI:1:0:0"
EndSection

Section "Screen"
    Identifier "nvidia"
    Device "nvidia"
    Option "AllowEmptyInitialConfiguration"
EndSection

Section "Device"
    Identifier "intel"
    Driver "modesetting"
    BusID "PCI:0:2:0"
EndSection

Section "Screen"
    Identifier "intel"
    Device "intel"
EndSection
